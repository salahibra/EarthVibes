<div class="dashboard-container">
  <div class="dashboard-card">
    <div class="header">
      <div>
        <h1>Welcome to Dashboard</h1>
        <p>You are logged in as: <strong>{{ userEmail() }}</strong></p>
      </div>
      <button class="logout-button" (click)="onLogout()">Logout</button>
    </div>

    <div class="posts-section">
      <h2>Create New Post</h2>
      <form (ngSubmit)="addPost()" class="post-form">
        <div class="form-group">
          <input
            type="text"
            [(ngModel)]="newPostTitle"
            name="title"
            placeholder="Post Title"
            required
            [disabled]="isSaving()"
          />
        </div>
        <div class="form-group">
          <textarea
            [(ngModel)]="newPostContent"
            name="content"
            placeholder="Post Content"
            rows="4"
            required
            [disabled]="isSaving()"
          ></textarea>
        </div>
        <button type="submit" [disabled]="isSaving() || !newPostTitle() || !newPostContent()">
          {{ isSaving() ? 'Saving...' : 'Add Post' }}
        </button>
      </form>

      <div class="posts-list">
        <h2>Your Posts</h2>
        @if (isLoading()) {
          <p class="loading">Loading posts...</p>
        } @else if (posts().length === 0) {
          <p class="no-posts">No posts yet. Create your first post!</p>
        } @else {
          @for (post of posts(); track post.id) {
            <div class="post-item">
              <h3>{{ post.title }}</h3>
              <p>{{ post.content }}</p>
              <div class="post-meta">
                <span>{{ post.createdAt | date:'short' }}</span>
                <button class="delete-button" (click)="deletePost(post.id!)">Delete</button>
              </div>
            </div>
          }
        }
      </div>
    </div>
  </div>
</div>
